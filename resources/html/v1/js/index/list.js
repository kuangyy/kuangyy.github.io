(function(){var a={el:$("#boardfrom"),data:{},selector:{nickname:"input[name='nickname']",contact:"input[name='contact']",content:"input[name='content']",messagebox:"#messagebox"},events:function(){this.el.on("click","button",this.eventsCallBack.commit);this.eventsCallBack.list()},eventsCallBack:{commit:function(){var e=a.el.find("button");e.attr("disabled",true);var t=10;var s=window.setInterval(function(){if(t<=0){e.text("Submit");e.removeAttr("disabled");window.clearInterval(s)}else{e.text("after"+t+"s");t--}},1e3);$.ajax({type:"POST",url:"https://www.kykys.cn/java/index/board/add",data:decodeURIComponent(a.el.serialize()),timeout:5e3,beforeSend:function(){},success:function(e){if(e&&e.success){alert("thanks for your message")}else{alert("server error")}}})},list:function(){$.ajax({type:"GET",url:"https://www.kykys.cn/java/index/board/list",data:{},timeout:5e3,beforeSend:function(){},success:function(e){if(e&&e.success&&e.response&&e.response.messageBoardModelList.length>0){var t=$(a.selector.messagebox);for(var s=0;s<e.response.messageBoardModelList.length;s++){var n=e.response.messageBoardModelList[s];t.append("<h2><i>"+textToEmojimessage(n.nickname)+"</i><small class='pull-right'>"+new Date(n.createTime).Format("yyyy-MM-dd hh:mm:ss")+"</small></h2><p>"+textToEmojimessage(n.content)+"</p><hr>")}}else{console.log("server error")}}})}},init:function(){this.events()}};a.init()})();